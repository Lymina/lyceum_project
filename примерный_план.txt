В групповой чат заходят участники. Бот в это время ничего не делает, но он онлайн.
Если одну минуту подряд не заходят новые участники, то чат закрывается.
Бот выводит сообщение: "Те, кто будут играть, отправьте "+" (без кавычек). Те, кто просто наблюдают, отправьте "-" (тоже без кавычек)".
Игроки заносятся в список, перетасовываются, и им назначаются роли (см. в вариации_мафии.txt). Наблюдатели просто остаются в чате игры.
Если получается недостаточное количество игроков (меньше 6), то бот пытается подговорить наблюдателей сыграть.
Если через 2 минуты это не удается сделать, то бот ведет с игроками светскую беседу (но это не точно). Можно подключиться к Алисе (можно же?)
Если игроки ничего не пишут в общем чате 3 минуты, они исключаются из чата.
Бот пишет каждому игроку в личные сообщения его роль. Выглядит это так: "Здравствуйте, Вы назначены <роль в творительном падеже, используем pymorphy>. Старайтесь не рассказывать о своей роли до конца игры"
Бот создает чат мафиозников, игроки знакомятся друг с другом.
В общем чате бот печатает правила по запросу "Правила"
Продолжение следует...
